import{_ as x,o as n,c,F as I,r as T,a as e,n as $,d as C,b as S,t as y,e as B,f as p,s as V,w as U,g as h,h as b,i as v,u as k,j,v as z,k as D,l as E,m as K,p as N,q as A,x as F}from "./index-BmVnCpi6.js";const H={},L={class:"inline-block text-left min-w-8 px-4 py-3"};function P(s, t){return n(),c("span",L,[(n(),c(I,null,T(3, a=>e("span",{key:a,class:$(`dot dot-${a}`)},"â€¢",2)),64))])}const q=x(H,[["render",P],["__scopeId","data-v-130ebac5"]]),G={key:1,class:"bubble"},W={key:0},J={key:1},O=C({__name:"MessageRow",props:{message:{}},setup(s){return(t, a)=>(n(),c("article",{class:$(["message-row",[t.message.isUser?"user":"assistant"]])},[t.message.isInteracting?(n(),S(q,{key:0})):(n(),c("div",G,[t.message.isUser?(n(),c("p",W,y(t.message.sendText),1)):(n(),c("p",J,y(t.message.responseText),1))]))],2))}}),Q=x(O,[["__scopeId","data-v-d799c959"]]);function X(){async function*s(t){await new Promise(a=>{setTimeout(a,1e3)}),yield"Who are you? I didn't invite you! Go fuck yourself!"}return{sendMessageStream:s}}const Y=B("chat",()=>{const s=p([]),t=p(""),a=p(!1),{sendMessageStream:d}=X();async function g(){if(!t.value.trim())return;const u=t.value;t.value="",a.value=!0;const l=Date.now().toString();s.value.push({id:`${l}-user`,sendText:u,responseText:"",isInteracting:!1,isUser:!0});try{const r=d([{role:"user",content:u}]);s.value.push({id:`${l}-assistant`,sendText:u,responseText:"",isInteracting:!0,isUser:!1});const o=s.value.find(i=>i.id===`${l}-assistant`);for await(const i of r){if(!o)return;o.isInteracting=!1,o.responseText+=i}}catch(r){const o=s.value.find(i=>i.id===`${l}-assistant`);o&&(o.isError=r.message||"Error")}finally{const r=s.value.find(o=>o.id===`${l}-assistant`);r&&(r.isInteracting=!1),a.value=!1}}return{messages:s,inputMessage:t,isInteracting:a,sendMessage:g}}),w= s=>(A("data-v-7eeb4bb7"),s=s(),F(),s),Z={class:"chat-view"},ee={class:"h-full flex flex-col px-4 md:px-6 lg:px-8"},se=w(()=>e("div",{class:"py-5 bg-white sticky top-0 z-10 before:absolute before:inset-x-0 before:bottom-0 before:h-px before:bg-gradient-to-r before:from-black/[0.06] before:via-black/10 before:to-black/[0.06]"},[e("div",{class:"flex items-center justify-between gap-2"},[e("nav",{"aria-label":"breadcrumb"},[e("ol",{class:"text-gray-500 flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-1.5"},[e("li",{class:"inline-flex items-center gap-1.5"},[e("a",{class:"hover:text-gray-600 transition-colors",href:"#"},"Playground")]),e("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})])]),e("li",{"data-slot":"breadcrumb-item",class:"inline-flex items-center gap-1.5"},[e("span",{"aria-disabled":"true",class:"text-gray-600 font-normal"},"Chat")])])])])],-1)),te=w(()=>e("div",{class:"my-8"},null,-1)),ae={class:"messages"},oe={class:"sticky bottom-0 pt-4 md:pt-8 z-50"},ne={class:"mx-auto bg-white rounded-2xl pb-4 md:pb-8"},re=["onKeydown"],ie={class:"flex items-center justify-between gap-2 p-3"},le=w(()=>e("div",{class:"flex items-center gap-2"},null,-1)),ce={class:"flex items-center gap-2"},de=C({__name:"ChatView",setup(s){const t=Y(),{messages:a,inputMessage:d,isInteracting:g}=V(t),{sendMessage:u}=t,l=p(),r=p(),o=()=>{g.value||u()};return U(()=>a,()=>{var f;const i=(f=l.value)==null?void 0:f.clientHeight;i&&setTimeout(()=>{var m;(m=r.value)==null||m.setScrollTop(i)},0)},{deep:!0}),(i, f)=>{const m=v("el-button"),M=v("el-form"),R=v("el-scrollbar");return n(),c("div",Z,[h(R,{ref_key:"scrollbarRef",ref:r},{default:b(()=>[e("div",ee,[e("div",{ref_key:"innerRef",ref:l,class:"relative grow"},[se,te,e("div",ae,[(n(!0),c(I,null,T(k(a), _=>(n(),S(Q,{key:_.id,message:_},null,8,["message"]))),128))])],512),e("div",oe,[e("div",ne,[h(M,{class:"bottom-bar"},{default:b(()=>[j(e("textarea",{"onUpdate:modelValue":f[0]||(f[0]= _=>D(d)?d.value=_:null),placeholder:"Ask me anything...",id:"message",rows:1,autocomplete:"off",onKeydown:E(K(o,["prevent"]),["enter"])},null,40,re),[[z,k(d)]]),e("div",ie,[le,e("div",ce,[h(m,{class:"shadow-sm h-6",type:"primary",size:"default",round:"",onClick:o},{default:b(()=>[N(" Ask Bart ")]),_:1})])])]),_:1})])])])]),_:1},512)])}}}),fe=x(de,[["__scopeId","data-v-7eeb4bb7"]]);export{fe as default};
